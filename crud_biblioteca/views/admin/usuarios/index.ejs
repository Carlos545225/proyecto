<!-- Contenido Principal del CRUD de Usuarios -->
<div class="container-fluid dashboard-container px-4 py-4">
    <!-- Nav Tabs estilo Carpeta -->
    <ul class="nav nav-tabs nav-tabs-custom" id="userTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="administradores-tab" data-bs-toggle="tab" data-bs-target="#administradores-tab-pane" type="button" role="tab" aria-controls="administradores-tab-pane" aria-selected="true">
                <i class="bi bi-shield-lock-fill me-2"></i>Administradores
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="bibliotecarios-tab" data-bs-toggle="tab" data-bs-target="#bibliotecarios-tab-pane" type="button" role="tab" aria-controls="bibliotecarios-tab-pane" aria-selected="false">
                <i class="bi bi-person-workspace me-2"></i>Bibliotecarios
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="lectores-tab" data-bs-toggle="tab" data-bs-target="#lectores-tab-pane" type="button" role="tab" aria-controls="lectores-tab-pane" aria-selected="false">
                <i class="bi bi-people-fill me-2"></i>Lectores
            </button>
        </li>
    </ul>

    <!-- Contenido de los Tabs -->
    <div class="tab-content" id="userTabsContent">
        <!-- Pestaña Administradores -->
        <div class="tab-pane fade show active p-3 bg-white border border-top-0 rounded-bottom shadow-sm" id="administradores-tab-pane" role="tabpanel" aria-labelledby="administradores-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="text-verde-oscuro mb-0">Gestión de Administradores</h3>
                <div class="d-flex gap-2">
                    <a href="/admin/usuarios/administrador/agregar" class="btn btn-leaf"><i class="bi bi-plus-circle-fill me-2"></i>Añadir Nuevo Administrador</a>
                    <a href="/admin/usuarios/administrador/historial" class="btn btn-outline-secondary ms-2"><i class="bi bi-clock-history me-2"></i>Historial de Administradores</a>
                </div>
            </div>
            <%- include('./administrador/tabla') %>
        </div>

        <!-- Pestaña Bibliotecarios -->
        <div class="tab-pane fade p-3 bg-white border border-top-0 rounded-bottom shadow-sm" id="bibliotecarios-tab-pane" role="tabpanel" aria-labelledby="bibliotecarios-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="text-verde-oscuro mb-0">Gestión de Bibliotecarios</h3>
                <div class="d-flex gap-2">
                    <a href="/admin/usuarios/bibliotecario/agregar" class="btn btn-leaf"><i class="bi bi-plus-circle-fill me-2"></i>Añadir Nuevo Bibliotecario</a>
                    <a href="/admin/usuarios/bibliotecario/historial" class="btn btn-outline-secondary ms-2"><i class="bi bi-clock-history me-2"></i>Historial de Bibliotecarios</a>
                </div>
            </div>
            <%- include('./bibliotecarios/tabla') %>
        </div>

        <!-- Pestaña Lectores -->
        <div class="tab-pane fade p-3 bg-white border border-top-0 rounded-bottom shadow-sm" id="lectores-tab-pane" role="tabpanel" aria-labelledby="lectores-tab" tabindex="0">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="text-verde-oscuro mb-0">Gestión de Lectores</h3>
                <div class="d-flex gap-2">
                    <a href="/admin/usuarios/lector/agregar" class="btn btn-leaf"><i class="bi bi-plus-circle-fill me-2"></i>Añadir Nuevo Lector</a>
                    <a href="/admin/usuarios/lector/historial" class="btn btn-outline-secondary ms-2"><i class="bi bi-clock-history me-2"></i>Historial de Lectores</a>
                </div>
            </div>
            <%- include('./lectores/tabla') %>
        </div>
    </div>
    <!-- /Contenido de los Tabs -->
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const tab = urlParams.get('tab');
    if (tab) {
      // Desactivar todas las pestañas y contenidos
      document.querySelectorAll('.nav-link').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tab-pane').forEach(el => {
        el.classList.remove('show', 'active');
      });

      // Activar la pestaña y el contenido correspondiente
      const tabButton = document.getElementById(tab + '-tab');
      const tabPane = document.getElementById(tab + '-tab-pane');
      if (tabButton && tabPane) {
        tabButton.classList.add('active');
        tabPane.classList.add('show', 'active');
      }
    }
  });
</script>
